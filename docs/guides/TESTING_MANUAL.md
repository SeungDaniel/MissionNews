# 🧪 Evangelical Mission Bot - Testing Guide

이 문서는 리팩토링된 기능(보안, 인증, 비동기 처리)이 정상적으로 작동하는지 확인하기 위한 테스트 절차입니다.

## 1. 🚀 앱 실행 (Local Run)

먼저 터미널에서 애플리케이션을 실행합니다.

```bash
# 1. 의존성 패키지 설치 (아직 안 했다면)
pip install -r requirements.txt

# 2. 앱 실행
streamlit run app.py
```

브라우저가 열리면 테스트를 시작합니다.

---

## 2. 🔐 인증 및 권한 테스트 (Auth & RBAC)

### 시나리오 A: 관리자(Admin) 로그인
1. **로그인 화면**이 나타나는지 확인합니다.
2. 다음 계정으로 로그인합니다:
   - **Username**: `admin`
   - **Password**: `admin`
3. **확인 사항**:
   - 사이드바 상단에 `User: Administrator (admin)` 이라고 표시되는가?
   - 사이드바에 **`⚙️ Configuration`** 메뉴가 보이는가? (환경 선택, 경로 설정 등)
   - 사이드바 하단에 **`Logout`** 버튼이 있는가?

### 시나리오 B: 권한 분리 확인 (선택 사항)
1. `.env` 파일을 열어 임시로 오퍼레이터 계정 정보를 확인/추가합니다. (기본 코드에 `operator` 로직이 없다면 admin은 모든 권한을 가집니다.)
2. (현재 코드상 Admin은 모든 탭과 설정을 볼 수 있습니다.)

---

## 3. ⚡️ 비동기 작업 큐 테스트 (Async Queue)

이전에는 작업을 시작하면 브라우저가 멈췄(Loading Spinner)으나, 이제는 **즉시 완료 메시지가 뜨고 백그라운드에서 실행**되어야 합니다.

1. **[신규 파일 등록]** 탭:
   - 테스트용 영상 파일(mp4)을 Inbox 폴더에 넣거나, 기존 파일을 선택해 등록합니다.
   
2. **[작업 처리]** 탭으로 이동:
   - **'🔄 목록 불러오기'** 버튼 클릭.
   - 대기 중인 작업 목록이 뜨는지 확인.
   - **'🚀 작업 시작'** 버튼 클릭.

3. **✅ 기대 결과 (중요)**:
   - **UI 멈춤 없음**: 버튼을 누르자마자 "✅ 00개의 작업이 백그라운드 큐에 등록되었습니다!" 메시지가 뜨고 화면이 새로고침 됩니다.
   - **대시보드 생성**: **`📡 백그라운드 작업 현황`** 섹션이 나타나고, 작업 상태가 `Queued` 또는 `Processing`으로 표시됩니다.
   - **진행률 바**: `Processing` 상태의 작업이 진행됨에 따라 게이지가 차오르는지 확인합니다.
   - **새로고침**: 필요하면 '🔄 상태 새로고침' 버튼을 눌러 진행 상황을 업데이트해 봅니다.

---

## 4. 🐳 Docker 실행 (옵션)

만약 Docker가 설치되어 있다면 다음 명령어로 실행할 수 있습니다.
(현재 `docker-compose` 명령어가 없다면 이 단계는 건너뛰세요)

```bash
# 최신 버전 Docker (공백 주의)
docker compose up --build

# 구 버전 Docker (하이픈 주의)
docker-compose up --build
```
