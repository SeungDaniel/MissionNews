version: '3.8'

services:
  # Main Application (Streamlit)
  app:
    build: .
    container_name: evangelical_mission_bot
    restart: unless-stopped
    ports:
      - "13002:8501" # External Access via Port 13002
    volumes:
      # Persist Data
      - ./data:/app/data
      - ./logs:/app/logs

      # Config & Secrets (Mounting specifically to avoid overwriting whole dirs)
      - ./config/config.yaml:/app/config/config.yaml
      - ./config/readtogether-479613-373cc03b0945.json:/app/config/readtogether-479613-373cc03b0945.json
      - ./config/users.yaml:/app/config/users.yaml # User DB
      - ./.env:/app/.env

    environment:
      - ENVIRONMENT=PROD
      - TZ=Asia/Seoul
